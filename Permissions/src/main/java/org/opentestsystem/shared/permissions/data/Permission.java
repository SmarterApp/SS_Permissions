/*******************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2013 American Institutes for Research
 * 
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at 
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/
package org.opentestsystem.shared.permissions.data;

import javax.xml.bind.annotation.XmlAttribute;

import org.apache.commons.lang3.StringUtils;

public class Permission
{
  protected String _name = null;

  @XmlAttribute (name = "name")
  public String getName () {
    return _name;
  }

  public void setName (String value) {
    _name = value;
  }

  // TODO mskhan:
  /*
   * In the sample xml that we have been provided:
   * 
   * <component name="TestAuthoring"> <permission name="TA|Author Tests"/>
   * </component>
   * 
   * in the permissionmapping however, there is no "|" character e.g.
   * 
   * <permissionmapping role="Test Author" permission="Author Test"/>
   * 
   * so for the time being we are assuming that the permission tag as defined as
   * a subchild of component contains multiple permission separated by "|".
   */
  public boolean containsPermission (String value)
  {
    String[] splits = StringUtils.split (getName (), '|');
    for (String split : splits)
      if (StringUtils.equals (split, value))
        return true;
    return false;
  }

  @Override
  public boolean equals (Object o)
  {
    if (o instanceof Permission)
    {
      Permission candidate = (Permission) o;
      return StringUtils.equals (candidate.getName (), getName ());
    }
    return false;
  }

}
